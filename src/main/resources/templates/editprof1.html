<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROFILE EDIT</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <!-- font audiowide -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/custom.css">

</head>
<body>
<div th:each="el : ${accdt}">
<div th:insert="blocks/header :: header"></div>
<div class="container mt-5 mb-5">
        <h1>Edit info</h1>
<!--    <form action="/profile1/edit" method="post">-->

    <form class="js-form" method="post">
        <input type="tel" th:value="${el.tel}" name="tel" placeholder="Enter your phone" class="form-control form-control-phone" ><br>
        <input type="text" th:value="${el.firstName}"name="firstName" placeholder="Enter your lastname" class="form-control" ><br>
        <input type="text" th:value="${el.lastName}"name="lastName" placeholder="Enter your lastname" class="form-control" ><br>
        <input type="email" th:value="${el.email}"name="email" placeholder="Enter your email" class="form-control form-control-email" ><br>
        <textarea name="about" placeholder="Enter text about you" class="form-control" th:text="${el.about}"></textarea><br>
        <button type="submit">Update info</button>
    </form>


</div>

    <script>
        let form = document.querySelector('.js-form'),
            formInputs = document.querySelectorAll('.form-control'),
            inputEmail = form.querySelector('.form-control-email')
        inputPhone = form.querySelector('.form-control-phone');
        function validateEmail(email) {
            let re = /[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/;
            return re.test(String(email).toLowerCase());
        }
        function validatePhone(phone) {
            let re = /^[0-9\s]*$/;
            return re.test(String(phone));
        }
        form.onsubmit = function () {
            let emailVal = inputEmail.value,
                phoneVal = inputPhone.value,
                emptyInputs = Array.from(formInputs).filter(input => input.value === '');
            formInputs.forEach(function (input) {
                if (input.value === '') {
                    input.style.borderColor = 'red';
                } else {
                    input.style.bordercolor = 'gray';
                }
            })
            if (emptyInputs.length !== 0) {
                console.log('inputs not filled');
                return false;
            }
            if (!validatePhone(phoneVal)) {
                console.log('phone not valid');
                inputPhone.style.borderColor = 'red'
                return false;
            } else {
                inputPhone.style.bordercolor = 'gray';
            }
            if(!validateEmail(emailVal)) {
                console.log('email not valid');
                inputEmail.style.borderColor = 'red'
                return false;
            } else {
                inputEmail.style.bordercolor = 'gray';
            }
        }
    </script>


</div>
</div>
</body>
</html>